(this["webpackJsonpchat-react"]=this["webpackJsonpchat-react"]||[]).push([[0],{126:function(e,a,t){e.exports=t(175)},175:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(8),o=t.n(l),s=t(16),c=t.n(s),i=t(15),u=t(210),m=t(207),d=t(226),p=t(208),g=t(74),E=t(205),h=t(209),f=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{alignItems:"flex-start"},n.a.createElement(m.a,null,n.a.createElement(d.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})),n.a.createElement(p.a,{primary:"Brunch this weekend?",secondary:n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{component:"span",variant:"body2",color:"textPrimary"},"Ali Connors")," \u2014 I'll be in your neighborhood doing errands this\u2026")})),n.a.createElement(h.a,{variant:"inset",component:"li"}))},b=function(){return n.a.createElement(u.a,null,n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null),n.a.createElement(f,null))},v=t(219),w=t(218),O=t(110),S=t(211),j=t(21),y=t(23),C=t.n(y),x=function(e){e?C.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete C.a.defaults.headers.common.Authorization},k=function(){return function(e){var a;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.token&&x(localStorage.token),t.prev=1,t.next=4,c.a.awrap(C.a.get("https://radiant-taiga-91549.herokuapp.com/users/me"));case 4:a=t.sent,e({type:"USER_LOGIN_SUCCESS",payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e({type:"USER_LOGIN_FAIL"});case 11:case"end":return t.stop()}}),null,null,[[1,8]])}},A=Object(j.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{userLogOut:function(){return function(e){e({type:"USER_LOGOUT"})}}})((function(e){var a=e.isAuthenticated,t=e.userLogOut;return n.a.createElement(n.a.Fragment,null,a&&n.a.createElement(S.a,{variant:"outlined",color:"secondary",onClick:t},"Log out"))})),_=t(82),U=Object(j.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var a=e.setOpenLoginPopup,t=e.isAuthenticated;return n.a.createElement(n.a.Fragment,null,!t&&n.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:function(){return a(!0)}},"login"))})),I=t(225),N=t(111),L=t.n(N),R=t(223),W=t(217),F=t(222),T=t(58),q=t(47),z=function(e,a){var t=Object(r.useState)({}),n=Object(i.a)(t,2),l=n[0],o=n[1],s=Object(r.useState)({}),c=Object(i.a)(s,2),u=c[0],m=c[1],d=Object(r.useState)(!1),p=Object(i.a)(d,2),g=p[0],E=p[1];return Object(r.useEffect)((function(){0===Object.keys(u).length&&g&&e()}),[u]),{handleChange:function(e,a){o((function(t){return Object(q.a)({},t,Object(T.a)({},e,a))})),m((function(a){return Object(q.a)({},a,Object(T.a)({},e,null))}))},handleSubmit:function(e){e.preventDefault(),m(a(l)),E(!0)},setServerErrors:function(e){m((function(a){return Object(q.a)({},a,{},e)}))},values:l,errors:u}},G=t(214),P=t(213),B=t(216),D=t(212),Z=t(215),V=Object(O.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=Object(j.b)(null,{loadUser:k})((function(e){var a=Object(r.useState)(!1),t=Object(i.a)(a,2),l=t[0],o=t[1],s=V(),u=z((function(){var a,t,r,n,l;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return o(!0),a=E.email,t=E.password,s.prev=2,s.next=5,c.a.awrap(C.a.post("https://radiant-taiga-91549.herokuapp.com/auth",{email:a,password:t}));case 5:r=s.sent,n=r.data,l=n.token,localStorage.setItem("token",l),e.loadUser(),o(!1),s.next=18;break;case 13:s.prev=13,s.t0=s.catch(2),console.log(s.t0),f({email:s.t0.message}),o(!1);case 18:case"end":return s.stop()}}),null,null,[[2,13]])}),(function(e){var a={};return e.email||(a.email="Required"),e.password||(a.password="Required"),e.email&&!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(a.email="Email is not valid"),a})),m=u.handleChange,p=u.handleSubmit,E=u.values,h=u.errors,f=u.setServerErrors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,n.a.createElement("div",{className:s.paper},n.a.createElement(d.a,{className:s.avatar}),n.a.createElement(g.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("form",{className:s.form,noValidate:!0,onSubmit:p},n.a.createElement(P.a,{fullWidth:!0,error:!!h.email},n.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return m(e.target.name,e.target.value)},label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,error:!!h.email,value:E.email?E.email:""}),h.email&&n.a.createElement(G.a,null,h.email)),n.a.createElement(P.a,{fullWidth:!0,error:!!h.password},n.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:!!h.password,onChange:function(e){return m(e.target.name,e.target.value)},autoComplete:"current-password",value:E.password?E.password:""}),h.password&&n.a.createElement(G.a,null,h.password))))),n.a.createElement(Z.a,null,l?n.a.createElement(B.a,null):n.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,onClick:p,size:"large"},"Sign In")))})),M=t(66),$=Object(O.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Y=Object(M.a)(null,{loadUser:k})((function(e){var a=Object(r.useState)(!1),t=Object(i.a)(a,2),l=t[0],o=t[1],s=$(),u=z((function(){var a,t,r,n,l;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return o(!0),a=E.email,t=E.password,s.prev=2,s.next=5,c.a.awrap(C.a.post("https://radiant-taiga-91549.herokuapp.com/users",{email:a,password:t}));case 5:r=s.sent,n=r.data,l=n.token,o(!1),localStorage.setItem("token",l),e.loadUser(),s.next=18;break;case 13:s.prev=13,s.t0=s.catch(2),console.log(s.t0),f({email:s.t0.message}),o(!1);case 18:case"end":return s.stop()}}),null,null,[[2,13]])}),(function(e){var a={};return e.email||(a.email="Required"),e.email&&!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(a.email="Email is not valid"),e.password||(a.password="Required"),e.repeat_password||(a.repeat_password="Required"),e.password&&e.repeat_password&&e.password!==e.repeat_password&&(a.password="Passwords are different",a.repeat_password="Passwords are different"),a})),m=u.handleChange,p=u.handleSubmit,E=u.values,h=u.errors,f=u.setServerErrors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,n.a.createElement("div",{className:s.paper},n.a.createElement(d.a,{className:s.avatar}),n.a.createElement(g.a,{component:"h1",variant:"h5"},"Sign Up"),n.a.createElement("form",{className:s.form,noValidate:!0,onSubmit:p},n.a.createElement(P.a,{fullWidth:!0,error:!!h.email},n.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return m(e.target.name,e.target.value)},label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,error:!!h.email,value:E.email?E.email:""}),h.email&&n.a.createElement(G.a,null,h.email)),n.a.createElement(P.a,{fullWidth:!0,error:!!h.password},n.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:!!h.password,onChange:function(e){return m(e.target.name,e.target.value)},autoComplete:"current-password",value:E.password?E.password:""}),h.password&&n.a.createElement(G.a,null,h.password)),n.a.createElement(P.a,{fullWidth:!0,error:!!h.repeat_password},n.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repeat_password",label:"Repeat password",type:"password",id:"repeat_password",error:!!h.repeat_password,onChange:function(e){return m(e.target.name,e.target.value)},autoComplete:"current-password",value:E.repeat_password?E.repeat_password:""}),h.repeat_password&&n.a.createElement(G.a,null,h.repeat_password))))),n.a.createElement(Z.a,null,l?n.a.createElement(B.a,null):n.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,size:"large",onClick:p},"Sign Up")))})),H=Object(j.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var a=e.open,t=e.setOpen,l=e.isAuthenticated,o=n.a.useState(0),s=Object(i.a)(o,2),c=s[0],u=s[1];return Object(r.useEffect)((function(){l&&t(!1)}),[l]),n.a.createElement(I.a,{open:a,onClose:function(){return t(!1)},"aria-labelledby":"auth-tabs-title"},n.a.createElement(L.a,{position:"static"},n.a.createElement(R.a,{value:c,onChange:function(e,a){return u(a)},"aria-label":"auth tabs",centered:!0},n.a.createElement(W.a,{label:"Sign In",id:"signIn","aria-controls":"signIn-tab"}),n.a.createElement(W.a,{label:"Sign Up",id:"signUp","aria-controls":"signUp-tab"}))),0===c&&n.a.createElement(J,null),1===c&&n.a.createElement(Y,null))})),K=t(112),Q=t.n(K),X=function(e){var a=e.letters,t=e.isOnline;return n.a.createElement(Q.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:t?n.a.createElement("span",{style:{backgroundColor:"#44b700",width:10,height:10,borderRadius:"50%"}}):null},n.a.createElement(d.a,null,a?a.toUpperCase():null))},ee=t(220),ae=Object(O.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,margin:"0 auto"},paper:{paddingBottom:50},appBar:{top:"auto",bottom:0,width:"100%",maxWidth:360,left:"50%",marginLeft:"-180px"},topToolbar:{flexGrow:1,display:"flex",alignItems:"center"},topToolbarText:{fontWeight:700,marginLeft:"10px"}}})),te=Object(j.b)((function(e){return{user:e.user}}))((function(e){var a=ae(),t=Object(r.useState)(!1),l=Object(i.a)(t,2),o=l[0],s=l[1],u=e.user,m=e.isUserLoading,d=u.email,p=u.isAuthenticated,g=Object(r.useRef)(null);Object(r.useEffect)((function(){g.current.scrollIntoView({behavior:"smooth",block:"start"})}),[]);var E=z((function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(O);case 1:case"end":return e.stop()}}))}),(function(e){var a={};return e.message||(a.message="Required"),a})),h=E.handleChange,f=E.handleSubmit,O=E.values,j=E.errors;E.setServerErrors;return n.a.createElement("div",{className:a.root},n.a.createElement(w.a,{position:"sticky",style:{flexGrow:1},color:"inherit"},n.a.createElement(v.a,null,n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a.topToolbar},m?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(ee.a,{variant:"circle",width:40,height:40})),n.a.createElement("div",null,n.a.createElement(ee.a,{variant:"rect",width:150,height:20}))):p?n.a.createElement(n.a.Fragment,null,n.a.createElement(X,{letters:"".concat(d[0]).concat(d[1]),isOnline:!0}),n.a.createElement("div",{className:a.topToolbarText},d)):n.a.createElement(n.a.Fragment,null,n.a.createElement(X,{isOnline:!1}),n.a.createElement("div",{className:a.topToolbarText},"Please, Login"))),!m&&n.a.createElement(n.a.Fragment,null,n.a.createElement(A,null),n.a.createElement(U,{setOpenLoginPopup:s}))))),n.a.createElement(_.a,{square:!0,className:a.paper},n.a.createElement(b,null),n.a.createElement("div",{ref:g})),n.a.createElement(w.a,{position:"fixed",color:"inherit",className:a.appBar},n.a.createElement(v.a,null,n.a.createElement(P.a,{fullWidth:!0,error:!!j.message,style:{marginRight:"5px"}},n.a.createElement(F.a,{id:"message",placeholder:"Your message",multiline:!0,rowsMax:"2",error:!!j.message,value:O.message?O.message:"",onChange:function(e){return h("message",e.target.value)}}),j.message&&n.a.createElement(G.a,null,j.message)),n.a.createElement(S.a,{variant:"contained",color:"primary",onClick:f},"Send"))),n.a.createElement(H,{open:o,setOpen:s}))})),re=t(31),ne=t(113),le=t(114),oe={isAuthenticated:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"USER_LOGIN_SUCCESS":return Object(q.a)({},e,{isAuthenticated:!0},r);case"USER_LOGOUT":case"USER_LOGIN_FAIL":return localStorage.removeItem("token"),Object(q.a)({},oe,{isAuthenticated:!1})}return e},ce=Object(re.combineReducers)({user:se}),ie=t(221),ue=Object(re.createStore)(ce,Object(ne.composeWithDevTools)(Object(re.applyMiddleware)(le.a)));localStorage.token&&x(localStorage.token);var me=function(){var e=Object(r.useState)(!0),a=Object(i.a)(e,2),t=a[0],l=a[1];return Object(r.useEffect)((function(){c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.awrap(ue.dispatch(k()));case 2:l(!1);case 3:case"end":return e.stop()}}))}),[]),n.a.createElement(j.a,{store:ue},n.a.createElement("div",{className:"App"},n.a.createElement(ie.a,null),n.a.createElement(te,{isUserLoading:t})))};o.a.render(n.a.createElement(me,null),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.606100b1.chunk.js.map