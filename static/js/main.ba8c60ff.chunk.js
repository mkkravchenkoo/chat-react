(this["webpackJsonpchat-react"]=this["webpackJsonpchat-react"]||[]).push([[0],{108:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(7),o=t.n(l),s=t(21),i=t.n(s),c=t(27),u=t(144),m=t(143),p=t(137),d=t(142),g=t(141),h=t(138),f=t(63),w=t(135),E=t(40),v=t(33),b=function(e,a){var t=Object(r.useState)({}),n=Object(c.a)(t,2),l=n[0],o=n[1],s=Object(r.useState)({}),i=Object(c.a)(s,2),u=i[0],m=i[1],p=Object(r.useState)(!1),d=Object(c.a)(p,2),g=d[0],h=d[1];return Object(r.useEffect)((function(){0===Object.keys(u).length&&g&&e()}),[u]),{handleChange:function(e,a){o((function(t){return Object(v.a)({},t,Object(E.a)({},e,a))})),m((function(a){return Object(v.a)({},a,Object(E.a)({},e,null))}))},handleSubmit:function(e){e.preventDefault(),m(a(l)),h(!0)},setServerErrors:function(e){m((function(a){return Object(v.a)({},a,{},e)}))},values:l,errors:u}},S=t(139),O=t(145),j=t(140),y=t(20),_=t.n(y),C=t(35),k=t(43),x=function(e){e?_.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete _.a.defaults.headers.common.Authorization},W=function(){return function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.token&&x(localStorage.token),t.prev=1,t.next=4,i.a.awrap(_.a.get("https://radiant-taiga-91549.herokuapp.com/users/me"));case 4:a=t.sent,e({type:"USER_LOGIN_SUCCESS",payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e({type:"USER_LOGIN_FAIL"});case 11:case"end":return t.stop()}}),null,null,[[1,8]])}},A=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),I=Object(k.b)(null,{loadUser:W})((function(e){var a=Object(r.useState)(!1),t=Object(c.a)(a,2),l=t[0],o=t[1],s=A(),f=b((function(){var a,t,r,n,l;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return o(!0),a=y.email,t=y.password,s.prev=2,s.next=5,i.a.awrap(_.a.post("https://radiant-taiga-91549.herokuapp.com/auth",{email:a,password:t}));case 5:r=s.sent,n=r.data,l=n.token,localStorage.setItem("token",l),e.loadUser(),o(!1),s.next=18;break;case 13:s.prev=13,s.t0=s.catch(2),console.log(s.t0),x({email:s.t0.message}),o(!1);case 18:case"end":return s.stop()}}),null,null,[[2,13]])}),(function(e){var a={};return e.email||(a.email="Required"),e.email&&!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(a.email="Email is not valid"),a})),E=f.handleChange,v=f.handleSubmit,y=f.values,k=f.errors,x=f.setServerErrors;return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(p.a,null),n.a.createElement("div",{className:s.paper},n.a.createElement(u.a,{className:s.avatar}),n.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("form",{className:s.form,noValidate:!0,onSubmit:v},n.a.createElement(O.a,{fullWidth:!0,error:!!k.email},n.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return E(e.target.name,e.target.value)},label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,error:!!k.email,value:y.email?y.email:""}),k.email&&n.a.createElement(S.a,null,k.email)),n.a.createElement(O.a,{fullWidth:!0,error:!!k.password},n.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:!!k.password,onChange:function(e){return E(e.target.name,e.target.value)},autoComplete:"current-password",value:y.password?y.password:""}),k.password&&n.a.createElement(S.a,null,k.password)),l?n.a.createElement(j.a,null):n.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit},"Sign In"),n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0},n.a.createElement(C.b,{to:"/register"},"Don't have an account? Sign Up"))))))})),N=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),U=function(){var e=Object(r.useState)(!1),a=Object(c.a)(e,2),t=a[0],l=a[1],o=N(),s=b((function(){var e,a,t,r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return l(!0),e=E.email,a=E.password,n.prev=2,n.next=5,i.a.awrap(_.a.post("https://radiant-taiga-91549.herokuapp.com/users",{email:e,password:a}));case 5:t=n.sent,r=t.data,r.token,l(!1),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(2),console.log(n.t0),y({email:n.t0.message}),l(!1);case 16:case"end":return n.stop()}}),null,null,[[2,11]])}),(function(e){var a={};return e.email||(a.email="Required"),e.email&&!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(a.email="Email is not valid"),e.password||(a.password="Required"),e.repeat_password||(a.repeat_password="Required"),e.password&&e.repeat_password&&e.password!==e.repeat_password&&(a.password="Passwords are different",a.repeat_password="Passwords are different"),a})),u=s.handleChange,f=s.handleSubmit,E=s.values,v=s.errors,y=s.setServerErrors;return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(p.a,null),n.a.createElement("div",{className:o.paper},n.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign Up"),n.a.createElement("form",{className:o.form,noValidate:!0,onSubmit:f},n.a.createElement(O.a,{fullWidth:!0,error:!!v.email},n.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",onChange:function(e){return u(e.target.name,e.target.value)},label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,error:!!v.email,value:E.email?E.email:""}),v.email&&n.a.createElement(S.a,null,v.email)),n.a.createElement(O.a,{fullWidth:!0,error:!!v.password},n.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:!!v.password,onChange:function(e){return u(e.target.name,e.target.value)},autoComplete:"current-password",value:E.password?E.password:""}),v.password&&n.a.createElement(S.a,null,v.password)),n.a.createElement(O.a,{fullWidth:!0,error:!!v.repeat_password},n.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repeat_password",label:"Repeat password",type:"password",id:"repeat_password",error:!!v.repeat_password,onChange:function(e){return u(e.target.name,e.target.value)},autoComplete:"current-password",value:E.repeat_password?E.repeat_password:""}),v.repeat_password&&n.a.createElement(S.a,null,v.repeat_password)),t?n.a.createElement(j.a,null):n.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{item:!0},n.a.createElement(C.b,{to:"/login"},"Have an account? Sign Up"))))))},R=function(){return n.a.createElement("div",null,"Chat")},q=t(24),z=t(65),L=t(66),D=t(28),T={isAuthenticated:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"USER_LOGIN_SUCCESS":return Object(v.a)({},e,{isAuthenticated:!0},r);case"USER_LOGIN_FAIL":return Object(v.a)({},e,{isAuthenticated:!1})}return e},G=Object(q.combineReducers)({user:F}),P=Object(q.createStore)(G,Object(z.composeWithDevTools)(Object(q.applyMiddleware)(L.a)));localStorage.token&&x(localStorage.token);var Z=function(){return Object(r.useEffect)((function(){P.dispatch(W())}),[]),n.a.createElement(k.a,{store:P},n.a.createElement("div",{className:"App"},n.a.createElement(C.a,null,n.a.createElement(D.c,null,n.a.createElement(D.a,{path:"/login",component:I}),n.a.createElement(D.a,{path:"/register",component:U}),n.a.createElement(D.a,{path:"/",component:R})))))};o.a.render(n.a.createElement(Z,null),document.getElementById("root"))},80:function(e,a,t){e.exports=t(108)}},[[80,1,2]]]);
//# sourceMappingURL=main.ba8c60ff.chunk.js.map