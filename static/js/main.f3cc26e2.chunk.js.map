{"version":3,"sources":["components/UserAvatar/index.js","components/UserAvatar/UserAvatar.js","components/MessageItem/index.js","components/MessageItem/MessageItem.js","components/SkeletonMessage/index.js","components/SkeletonMessage/SkeletonMessage.js","utils/setAuthToken.js","store/actions/user.js","store/actions/actionTypes.js","components/MessageList/index.js","components/MessageList/MessageList.js","store/actions/message.js","components/LogoutButton/index.js","components/LogoutButton/LogoutButton.js","components/LoginButton/index.js","components/LoginButton/LoginButton.js","hooks/useForm.js","components/LoginForm/LoginForm.js","components/RegisterForm/RegisterForm.js","components/RegisterForm/index.js","components/LoginRegisterPopup/index.js","components/LoginRegisterPopup/LoginRegisterPopup.js","components/Chat/Chat.js","components/Chat/index.js","store/reducers/user.js","store/reducers/message.js","store/reducers/index.js","App.js","index.js"],"names":["UserAvatar","letters","isOnline","overlap","anchorOrigin","vertical","horizontal","badgeContent","style","backgroundColor","width","height","borderRadius","Avatar","toUpperCase","MessageItem","msg","onlineUsers","user","message","date","email","msgDate","Date","idx","findIndex","item","userId","_id","dateStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","ListItem","alignItems","ListItemAvatar","ListItemText","primary","display","justifyContent","Typography","component","variant","color","secondary","Fragment","Divider","SkeletonMessage","padding","Skeleton","paddingLeft","paddingBottom","setAuthToken","token","axios","defaults","headers","common","loadUser","dispatch","a","async","localStorage","get","res","type","payload","data","MessageList","connect","messages","getMessages","skip","response","updateOnlineUsers","users","newMessages","props","socket","io","baseURL","executeScroll","items","total","page","useState","isLoading","setIsLoading","isLoadingMore","setIsLoadingMore","isAuthenticated","useEffect","on","emit","online","List","length","CircularProgress","Button","margin","onClick","map","key","LogoutButton","userLogOut","LoginButton","setOpenLoginPopup","useForm","callback","validate","values","setValues","errors","setErrors","isSubmitting","setIsSubmitting","Object","keys","handleChange","name","value","handleSubmit","event","preventDefault","setServerErrors","serverErrors","useStyles","makeStyles","theme","paper","flexDirection","avatar","spacing","palette","main","form","marginTop","submit","classes","password","post","setItem","console","log","test","DialogContent","className","noValidate","onSubmit","FormControl","fullWidth","error","TextField","required","id","onChange","e","target","label","autoComplete","autoFocus","FormHelperText","DialogActions","size","RegisterForm","repeat_password","LoginRegisterPopup","open","setOpen","React","setValue","Dialog","onClose","aria-labelledby","position","Tabs","newValue","aria-label","centered","Tab","aria-controls","root","maxWidth","background","boxShadow","appBar","top","bottom","left","marginLeft","topToolbar","flexGrow","topToolbarText","fontWeight","Chat","state","openLoginPopup","isUserLoading","isMessageSending","setIsMessageSending","myRef","useRef","current","scrollIntoView","behavior","block","AppBar","Toolbar","Paper","square","ref","marginRight","placeholder","multiline","rowsMax","initialState","action","removeItem","reverse","combineReducers","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","App","setIsUserLoading","CssBaseline","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f3cc26e2.chunk.js","sourcesContent":["import UserAvatar from \"./UserAvatar\";\n\nexport default UserAvatar;","import React from 'react';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Badge from \"@material-ui/core/Badge/Badge\";\n\nconst UserAvatar = ({letters, isOnline}) => {\n\treturn (\n\t\t<Badge\n\t\t\toverlap=\"circle\"\n\t\t\tanchorOrigin={{\n\t\t\t\tvertical: 'bottom',\n\t\t\t\thorizontal: 'right',\n\t\t\t}}\n\t\t\tbadgeContent={isOnline ? <span style={{backgroundColor:\"#44b700\", width:10, height:10, borderRadius:\"50%\"}}/> : null}\n\t\t>\n\t\t\t<Avatar>{letters ? letters.toUpperCase() : null}</Avatar>\n\t\t</Badge>\n\t);\n};\n\nexport default UserAvatar;\n","import MessageItem from \"./MessageItem\";\n\nexport default MessageItem;\n","import React from 'react';\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport UserAvatar from \"../UserAvatar\";\n\nconst MessageItem = ({msg, onlineUsers}) => {\n\tconst {user, message, date} = msg;\n\tconst {email} = user;\n\tconst msgDate = new Date(date);\n\n\tconst idx = onlineUsers.findIndex((item) => item.userId === user._id);\n\n\tconst dateStr = `${msgDate.getFullYear()}-${msgDate.getMonth() < 10 ? `0${msgDate.getMonth()}` : msgDate.getMonth()}-${msgDate.getDate() < 10 ? `0${msgDate.getDate()}` : msgDate.getDate()}, \n\t${msgDate.getHours() < 10 ? `0${msgDate.getHours()}` : msgDate.getHours()}:${msgDate.getMinutes() < 10 ? `0${msgDate.getMinutes()}` : msgDate.getMinutes()}:${msgDate.getSeconds() < 10 ? `0${msgDate.getSeconds()}` : msgDate.getSeconds()}`;\n\treturn (\n\t\t<>\n\t\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<UserAvatar letters={`${email[0]}${email[1]}`} isOnline={idx !== -1}/>\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={\n\t\t\t\t\t\t<div style={{display:\"flex\", justifyContent:\"space-between\"}}>\n\t\t\t\t\t\t\t<Typography component=\"span\" variant=\"body2\" color=\"textPrimary\">\n\t\t\t\t\t\t\t\t{email}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography component=\"span\" variant=\"body2\" color=\"textPrimary\">\n\t\t\t\t\t\t\t\t{dateStr}\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\tsecondary={\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\n\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" component=\"li\" />\n\t\t</>\n\t);\n};\n\nexport default MessageItem;\n","import SkeletonMessage from \"./SkeletonMessage\";\n\nexport default SkeletonMessage;","import React from 'react';\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst SkeletonMessage = () => {\n\treturn (\n\t\t<div style={{display:\"flex\", padding:\"10px\"}}>\n\t\t\t<div>\n\t\t\t\t<Skeleton variant=\"circle\" width={40} height={40} />\n\t\t\t</div>\n\t\t\t<div style={{width:\"100%\", paddingLeft:\"10px\"}}>\n\t\t\t\t<div style={{paddingBottom:\"10px\"}}><Skeleton variant=\"rect\" width={150} height={20} /></div>\n\t\t\t\t<Skeleton variant=\"rect\" width={\"100%\"} height={50} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default SkeletonMessage;\n","import axios from 'axios'\n\nconst setAuthToken = token => {\n\tif(token){\n\t\taxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\t}else{\n\n\t\tdelete axios.defaults.headers.common['Authorization']\n\t}\n}\n\nexport default setAuthToken","import {USER_LOGIN_SUCCESS, USER_LOGIN_FAIL, USER_LOGOUT, ONLINE_USERS} from \"./actionTypes\";\nimport setAuthToken from \"../../utils/setAuthToken\";\nimport axios from 'axios'\nimport io from \"socket.io-client\";\n\nconst loadUser = () => async dispatch => {\n\tif (localStorage.token) {\n\t\tsetAuthToken(localStorage.token)\n\t}\n\ttry {\n\t\tconst res = await axios.get('/users/me');\n\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_SUCCESS,\n\t\t\tpayload: res.data\n\t\t})\n\t} catch (e) {\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_FAIL\n\t\t})\n\n\t}\n}\n\nconst updateOnlineUsers = (users) => async dispatch => {\n\tdispatch({\n\t\ttype: ONLINE_USERS,\n\t\tpayload: users\n\t})\n}\n\nconst userLogOut = (userId) => dispatch => {\n\tdelete axios.defaults.headers.common['Authorization'];\n\tconst socket = io(axios.defaults.baseURL);\n\tsocket.emit('user logout', userId);\n\tdispatch({\n\t\ttype: USER_LOGOUT,\n\t})\n}\n\nexport {\n\tloadUser,\n\tuserLogOut,\n\tupdateOnlineUsers\n}","export const USER_LOGIN_SUCCESS = \"USER_LOGIN_SUCCESS\";\nexport const USER_LOGIN_FAIL = \"USER_LOGIN_FAIL\";\nexport const USER_LOGOUT = \"USER_LOGOUT\";\n\nexport const MESSAGES_FETCH_SUCCESS = \"MESSAGES_FETCH_SUCCESS\";\nexport const MESSAGES_LOAD_MORE_SUCCESS = \"MESSAGES_LOAD_MORE_SUCCESS\";\nexport const MESSAGES_FETCH_FAIL = \"MESSAGES_FETCH_FAIL\";\nexport const MESSAGE_NEW = \"MESSAGE_NEW\";\n// export const MESSAGE_SEND_SUCCESS = \"MESSAGE_SEND_SUCCESS\";\n// export const MESSAGE_SEND_FAIL = \"MESSAGE_SEND_FAIL\";\n\nexport const ONLINE_USERS = \"ONLINE_USERS\";","import MessageList from \"./MessageList\";\n\nexport default MessageList;","import React, {useEffect, useState} from 'react';\nimport List from '@material-ui/core/List';\nimport MessageItem from \"../MessageItem\";\nimport {connect} from \"react-redux\";\nimport {getMessages, newMessages} from '../../store/actions/message'\nimport SkeletonMessage from \"../SkeletonMessage\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\nimport {updateOnlineUsers} from \"../../store/actions/user\";\n\nconst MessageList = (props) => {\n\tconst socket = io(axios.defaults.baseURL);\n\tconst {getMessages, messages, user, updateOnlineUsers, newMessages, executeScroll} = props;\n\tconst {items, total, page} = messages;\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [isLoadingMore, setIsLoadingMore] = useState(false);\n\n\tconst {isAuthenticated, _id, onlineUsers} = user;\n\tuseEffect(() => {\n\t\tsetIsLoading(true);\n\t\t(async () => {\n\t\t\tawait getMessages();\n\t\t\tsetIsLoading(false);\n\t\t})()\n\t},[]);\n\n\tuseEffect(() => {\n\t\tsocket.on('connect', function(){\n\t\t\tsocket.emit('online user', isAuthenticated ? _id : null);\n\t\t});\n\t}, [user.isAuthenticated]);\n\n\tuseEffect(() => {\n\n\t\tsocket.on('online users', (data) => {\n\t\t\tupdateOnlineUsers(data.online);\n\t\t});\n\n\t\tsocket.on('new message', (data) => {\n\t\t\tnewMessages(data.message);\n\t\t\texecuteScroll();\n\t\t});\n\t},[]);\n\n\tconst loadMore = async () => {\n\t\tsetIsLoadingMore(true);\n\t\tawait getMessages(items.length);\n\t\tsetIsLoadingMore(false)\n\t}\n\n\treturn (\n\t\t<List>\n\t\t\t{isLoading ? (\n\t\t\t\t<>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{(items.length < total) ? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t{isLoadingMore ? <div style={{display: \"flex\",width: \"100%\",justifyContent: \"center\"}}><CircularProgress color=\"secondary\" /></div> : (\n\t\t\t\t\t\t\t\t<Button variant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tstyle={{margin:\"0 auto\"}}\n\t\t\t\t\t\t\t\t\t\tonClick={() => loadMore()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tGet older\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{items.length > 0 && items.map((msg) => {\n\t\t\t\t\t\treturn <MessageItem key={msg._id} msg={msg} onlineUsers={onlineUsers}/>\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t</List>\n\t);\n};\n\nconst mapStateToProps = ({messages}) => {\n\treturn {\n\t\tmessages,\n\t}\n}\n\nexport default connect(\n\tmapStateToProps,\n\t{getMessages, updateOnlineUsers, newMessages}\n)(MessageList);\n","import axios from 'axios';\nimport {\n\tMESSAGES_FETCH_FAIL,\n\t// MESSAGE_SEND_FAIL,\n\t// MESSAGE_SEND_SUCCESS,\n\tMESSAGES_FETCH_SUCCESS,\n\tMESSAGES_LOAD_MORE_SUCCESS,\n\tMESSAGE_NEW\n} from \"./actionTypes\";\n\nconst getMessages = (skip) => async dispatch => {\n\ttry {\n\t\tif(skip){\n\t\t\t// load more\n\t\t\tconst response = await axios.get(`/messages?skip=${skip}`);\n\t\t\tdispatch({\n\t\t\t\ttype: MESSAGES_LOAD_MORE_SUCCESS,\n\t\t\t\tpayload: response.data\n\t\t\t})\n\t\t}else{\n\t\t\tconst response = await axios.get(`/messages`);\n\t\t\tdispatch({\n\t\t\t\ttype: MESSAGES_FETCH_SUCCESS,\n\t\t\t\tpayload: response.data\n\t\t\t})\n\n\t\t}\n\n\t}catch (e) {\n\t\tdispatch({\n\t\t\ttype: MESSAGES_FETCH_FAIL,\n\t\t})\n\t}\n}\n\nconst newMessages = (message) => async dispatch => {\n\tdispatch({\n\t\ttype: MESSAGE_NEW,\n\t\tpayload: message\n\t})\n}\n\n\nexport {\n\tgetMessages,\n\tnewMessages\n}\n\n","import LogoutButton from \"./LogoutButton\";\n\nexport default LogoutButton;","import React from 'react';\nimport Button from \"@material-ui/core/Button\";\nimport {connect} from \"react-redux\";\nimport {userLogOut} from \"../../store/actions/user\";\n\nconst LogoutButton = ({isAuthenticated, userLogOut, _id}) => {\n\treturn (\n\t\t<>\n\t\t\t{isAuthenticated && (\n\t\t\t\t<Button variant=\"outlined\" color=\"secondary\" onClick={() => userLogOut(_id)}>\n\t\t\t\t\tLog out\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</>\n\n\t);\n};\n\nconst mapStateToProps = ({user}) => {\n\tconst {isAuthenticated, _id} = user;\n\treturn {\n\t\tisAuthenticated,\n\t\t_id\n\t}\n}\nexport default connect(\n\tmapStateToProps, {userLogOut}\n)(LogoutButton);\n","import LoginButton from \"./LoginButton\";\n\nexport default LoginButton","import React from 'react';\nimport Button from \"@material-ui/core/Button\";\nimport {connect} from \"react-redux\";\n\nconst LoginButton = ({setOpenLoginPopup, isAuthenticated}) => {\n\treturn (\n\t\t<>\n\t\t\t{!isAuthenticated && (\n\t\t\t\t<Button variant=\"outlined\" color=\"primary\" onClick={() => setOpenLoginPopup(true)}>\n\t\t\t\t\tlogin\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</>\n\n\t);\n};\n\nconst mapStateToProps = ({user}) => {\n\tconst {isAuthenticated} = user;\n\treturn {\n\t\tisAuthenticated\n\t}\n}\nexport default connect(\n\tmapStateToProps\n)(LoginButton);\n","import { useState, useEffect } from \"react\";\nconst useForm = (callback, validate) => {\n\tconst [values, setValues] = useState({});\n\tconst [errors, setErrors] = useState({});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst handleChange = (name, value) => {\n\t\tsetValues(values => (\n\t\t\t{\n\t\t\t\t...values,\n\t\t\t\t[name]: value\n\t\t\t}\n\t\t));\n\t\tsetErrors(errors => (\n\t\t\t{\n\t\t\t\t...errors,\n\t\t\t\t[name]: null\n\t\t\t}\n\t\t));\n\t};\n\tconst handleSubmit = event => {\n\t\tevent.preventDefault();\n\t\tsetErrors(validate(values));\n\t\tsetIsSubmitting(true);\n\t};\n\tconst setServerErrors = (serverErrors) => {\n\t\tsetErrors(errors => (\n\t\t\t{\n\t\t\t\t...errors,\n\t\t\t\t...serverErrors\n\t\t\t}\n\t\t));\n\t};\n\tuseEffect(() => {\n\t\tif (Object.keys(errors).length === 0 && isSubmitting) {\n\t\t\tcallback();\n\t\t}\n\t}, [errors]);\n\treturn {\n\t\thandleChange,\n\t\thandleSubmit,\n\t\tsetServerErrors,\n\t\tvalues,\n\t\terrors\n\t};\n};\nexport default useForm;","import React, {useState} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useForm from \"../../hooks/useForm\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport {connect} from \"react-redux\";\nimport {loadUser} from \"../../store/actions/user\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\nconst useStyles = makeStyles(theme => ({\n\tpaper: {\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%',\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nconst LoginForm = (props) => {\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst classes = useStyles();\n\n\tconst validate = (values) => {\n\t\tconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tconst errors = {};\n\n\t\tif (!values.email) {\n\t\t\terrors.email = 'Required';\n\t\t}\n\t\tif (!values.password) {\n\t\t\terrors.password = 'Required';\n\t\t}\n\t\tif (values.email && !emailRegex.test(values.email)) {\n\t\t\terrors.email = 'Email is not valid';\n\t\t}\n\n\t\treturn errors;\n\t};\n\n\n\tconst submit = async () => {\n\t\tsetIsSubmitting(true);\n\t\tconst {email, password} = values;\n\t\ttry {\n\t\t\tconst response = await axios.post('/auth', {email, password})\n\t\t\tconst {data} = response;\n\t\t\tconst {token} = data;\n\t\t\tlocalStorage.setItem('token', token);\n\t\t\tprops.loadUser();\n\n\t\t\tsetIsSubmitting(false);\n\t\t}catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tsetServerErrors({email:e.message});\n\t\t\tsetIsSubmitting(false);\n\t\t}\n\t}\n\n\tconst { handleChange, handleSubmit, values, errors, setServerErrors } = useForm(\n\t\tsubmit,\n\t\tvalidate,\n\t);\n\n\n\treturn (\n\t\t<>\n\t\t\t<DialogContent>\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<Avatar className={classes.avatar}/>\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\t\tSign in\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"email\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tlabel=\"Email Address\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\terror={!!errors[\"email\"]}\n\t\t\t\t\t\t\t\tvalue={values[\"email\"] ? values[\"email\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"email\"] && <FormHelperText>{errors[\"email\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"password\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\terror={!!errors[\"password\"]}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\tvalue={values[\"password\"] ? values[\"password\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"password\"] && <FormHelperText>{errors[\"password\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions style={{justifyContent:\"center\"}}>\n\t\t\t\t{!isSubmitting ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t>\n\t\t\t\t\t\tSign In\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t)}\n\t\t\t</DialogActions>\n\n\t\t</>\n\t);\n}\n\nexport default connect(\n\tnull,\n\t{loadUser}\n)(LoginForm)","import React, {useState} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useForm from \"../../hooks/useForm\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport connect from \"react-redux/es/connect/connect\";\nimport {loadUser} from \"../../store/actions/user\";\n\n\n\nconst useStyles = makeStyles(theme => ({\n\tpaper: {\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nconst RegisterForm = (props) => {\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst classes = useStyles();\n\n\tconst validate = (values) => {\n\t\tconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tconst errors = {};\n\n\t\tif (!values.email) {\n\t\t\terrors.email = 'Required';\n\t\t}\n\t\tif (values.email && !emailRegex.test(values.email)) {\n\t\t\terrors.email = 'Email is not valid';\n\t\t}\n\t\tif (!values.password) {\n\t\t\terrors.password = 'Required';\n\t\t}\n\t\tif (!values.repeat_password) {\n\t\t\terrors.repeat_password = 'Required';\n\t\t}\n\t\tif((values.password && values.repeat_password) && (values.password !== values.repeat_password)){\n\t\t\terrors.password = 'Passwords are different';\n\t\t\terrors.repeat_password = 'Passwords are different';\n\t\t}\n\n\n\t\treturn errors;\n\t};\n\n\n\tconst submit = async () => {\n\t\tsetIsSubmitting(true);\n\t\tconst {email, password} = values;\n\t\ttry {\n\t\t\tconst response = await axios.post('/users', {email, password})\n\t\t\tconst {data} = response;\n\t\t\tconst {token} = data;\n\t\t\tsetIsSubmitting(false);\n\t\t\tlocalStorage.setItem('token', token);\n\t\t\tprops.loadUser();\n\n\t\t}catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tsetServerErrors({email:e.message});\n\t\t\tsetIsSubmitting(false);\n\t\t}\n\t}\n\n\tconst { handleChange, handleSubmit, values, errors, setServerErrors } = useForm(\n\t\tsubmit,\n\t\tvalidate,\n\t);\n\n\n\n\treturn (\n\t\t<>\n\t\t\t<DialogContent>\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<Avatar className={classes.avatar}/>\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"email\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tlabel=\"Email Address\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\terror={!!errors[\"email\"]}\n\t\t\t\t\t\t\t\tvalue={values[\"email\"] ? values[\"email\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"email\"] && <FormHelperText>{errors[\"email\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"password\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\terror={!!errors[\"password\"]}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\tvalue={values[\"password\"] ? values[\"password\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"password\"] && <FormHelperText>{errors[\"password\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"repeat_password\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tname=\"repeat_password\"\n\t\t\t\t\t\t\t\tlabel=\"Repeat password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"repeat_password\"\n\t\t\t\t\t\t\t\terror={!!errors[\"repeat_password\"]}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\tvalue={values[\"repeat_password\"] ? values[\"repeat_password\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"repeat_password\"] && <FormHelperText>{errors[\"repeat_password\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions style={{justifyContent:\"center\"}}>\n\t\t\t\t{!isSubmitting ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t)}\n\t\t\t</DialogActions>\n\t\t</>\n\t);\n}\n\nexport default connect(\n\tnull,\n\t{loadUser}\n)(RegisterForm)","import RegisterForm from \"./RegisterForm\";\n\nexport default RegisterForm","import LoginRegisterPopup from \"./LoginRegisterPopup\";\n\nexport default LoginRegisterPopup","import React, {useEffect} from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport AppBar from \"@material-ui/core/AppBar/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport LoginForm from \"../LoginForm/LoginForm\";\nimport RegisterForm from \"../RegisterForm\";\nimport {connect} from \"react-redux\";\n\nconst LoginRegisterPopup = (props) => {\n\tconst {open, setOpen, isAuthenticated} = props;\n\n\tconst [value, setValue] = React.useState(0);\n\n\tuseEffect(() => {\n\t\tif(isAuthenticated){\n\t\t\tsetOpen(false)\n\t\t}\n\t},[isAuthenticated]);\n\n\n\treturn (\n\t\t\t<Dialog open={open} onClose={() => setOpen(false)} aria-labelledby=\"auth-tabs-title\">\n\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t<Tabs value={value} onChange={(event, newValue) => setValue(newValue)} aria-label=\"auth tabs\" centered>\n\t\t\t\t\t\t<Tab label=\"Sign In\" id=\"signIn\" aria-controls=\"signIn-tab\"/>\n\t\t\t\t\t\t<Tab label=\"Sign Up\" id=\"signUp\" aria-controls=\"signUp-tab\"/>\n\t\t\t\t\t</Tabs>\n\t\t\t\t</AppBar>\n\t\t\t\t{value === 0 && <LoginForm/>}\n\t\t\t\t{value === 1 && <RegisterForm/>}\n\t\t\t</Dialog>\n\t);\n}\n\nconst mapStateToProps = ({user}) => {\n\tconst {isAuthenticated} = user;\n\treturn {\n\t\tisAuthenticated\n\t}\n}\n\nexport default connect(\n\tmapStateToProps\n)(LoginRegisterPopup)","import React, {useEffect, useRef, useState} from 'react';\nimport MessageList from \"../MessageList\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport {makeStyles} from \"@material-ui/core\";\nimport LogoutButton from \"../LogoutButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport LoginButton from \"../LoginButton\";\nimport LoginRegisterPopup from \"../LoginRegisterPopup\";\nimport {connect} from \"react-redux\";\nimport UserAvatar from \"../UserAvatar\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport useForm from \"../../hooks/useForm\";\nimport axios from \"axios\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport io from \"socket.io-client\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\twidth: '100%',\n\t\tmaxWidth: 360,\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tmargin:\"0 auto\",\n\t\theight:\"100%\"\n\t},\n\tpaper: {\n\t\tpaddingBottom: 50,\n\t\tboxShadow:\"none\"\n\t},\n\tappBar: {\n\t\ttop: 'auto',\n\t\tbottom: 0,\n\t\twidth: '100%',\n\t\tmaxWidth: 360,\n\t\tleft:\"50%\",\n\t\tmarginLeft:\"-180px\"\n\t},\n\ttopToolbar:{\n\t\tflexGrow: 1,\n\t\tdisplay:\"flex\",\n\t\talignItems: \"center\"\n\t},\n\ttopToolbarText:{\n\t\tfontWeight:700,\n\t\tmarginLeft: \"10px\"\n\t}\n}));\n\n\nconst Chat = (props) => {\n\tconst classes = useStyles();\n\tconst [openLoginPopup, setOpenLoginPopup] = useState(false);\n\tconst {user, isUserLoading} = props;\n\tconst {email, isAuthenticated} = user;\n\n\tconst [isMessageSending, setIsMessageSending] = useState(false);\n\n\tconst myRef = useRef(null);\n\n\tconst executeScroll = () => {\n\t\tmyRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\n\t};\n\n\tuseEffect(() => {\n\t\texecuteScroll();\n\t},[]);\n\n\tconst validate = (values) => {\n\t\tconst errors = {};\n\t\tif (!values.message) {\n\t\t\terrors.message = 'Required';\n\t\t}\n\t\treturn errors;\n\t};\n\n\tconst submit = async () => {\n\t\tconst {message} = values;\n\t\tsetIsMessageSending(true);\n\t\ttry {\n\t\t\tconst response = await axios.post(`/messages`, {message});\n\t\t\thandleChange(\"message\", \"\");\n\t\t\tconst socket = io(axios.defaults.baseURL);\n\t\t\tsocket.emit('message add', response.data.message);\n\t\t\tsetIsMessageSending(false);\n\t\t}catch (e) {\n\t\t\tif(e.response && e.response.data){\n\t\t\t\tsetServerErrors({\n\t\t\t\t\tmessage:e.response.data\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tsetServerErrors({\n\t\t\t\t\tmessage:e.message\n\t\t\t\t})\n\t\t\t}\n\t\t\tsetIsMessageSending(false);\n\n\t\t}\n\t}\n\n\n\tconst { handleChange, handleSubmit, values, errors, setServerErrors } = useForm(\n\t\tsubmit,\n\t\tvalidate,\n\t);\n\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar position=\"sticky\" style={{flexGrow: 1}} color=\"inherit\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={classes.topToolbar}>\n\t\t\t\t\t\t\t{isUserLoading ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"circle\" width={40} height={40} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"rect\" width={150} height={20} />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tisAuthenticated ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar letters={`${email[0]}${email[1]}`} isOnline={true}/>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.topToolbarText}>{email}</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : <>\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar isOnline={false}/>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.topToolbarText}>Please, Login</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!isUserLoading && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LogoutButton/>\n\t\t\t\t\t\t\t\t<LoginButton setOpenLoginPopup={setOpenLoginPopup}/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Paper square className={classes.paper}>\n\t\t\t\t<MessageList user={user} executeScroll={executeScroll}/>\n\t\t\t\t<div ref={myRef}/>\n\t\t\t</Paper>\n\t\t\t<AppBar position=\"fixed\" color=\"inherit\" className={classes.appBar}>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<FormControl fullWidth error={!!errors[\"message\"]} style={{marginRight:\"5px\"}}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"message\"\n\t\t\t\t\t\t\tplaceholder=\"Your message\"\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\trowsMax=\"2\"\n\t\t\t\t\t\t\terror={!!errors[\"message\"]}\n\t\t\t\t\t\t\tvalue={values['message'] ? values['message'] : \"\" }\n\t\t\t\t\t\t\tonChange={(event) => handleChange(\"message\", event.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors[\"message\"] && <FormHelperText>{errors[\"message\"]}</FormHelperText>}\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n\t\t\t\t\t\t{isMessageSending ?  <CircularProgress color=\"inherit\" size={20}/> : \"Send\"}\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<LoginRegisterPopup open={openLoginPopup} setOpen={setOpenLoginPopup}/>\n\t\t</div>\n\t);\n};\n\nconst mapStateTotProps = (state) => {\n\tconst {user} = state;\n\treturn {\n\t\tuser\n\t}\n}\nexport default connect(\n\tmapStateTotProps,\n)(Chat);\n","import Chat from \"./Chat\";\n\nexport default Chat;","import {USER_LOGIN_SUCCESS, USER_LOGIN_FAIL, USER_LOGOUT, ONLINE_USERS} from \"../actions/actionTypes\";\n\nconst initialState = {\n\tisAuthenticated:false,\n\tonlineUsers:[]\n};\n\nconst user = (state=initialState, action) => {\n\tconst {type, payload} = action;\n\n\tswitch (type) {\n\t\tcase USER_LOGIN_SUCCESS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisAuthenticated:true,\n\t\t\t\t...payload\n\t\t\t}\n\t\tcase ONLINE_USERS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tonlineUsers:payload\n\t\t\t}\n\t\tcase USER_LOGOUT :\n\t\tcase USER_LOGIN_FAIL :\n\t\t\tlocalStorage.removeItem('token');\n\t\t\treturn {\n\t\t\t\t...initialState,\n\t\t\t\tisAuthenticated:false\n\t\t\t}\n\t}\n\treturn state\n}\n\nexport default user","import {\n\tMESSAGES_FETCH_SUCCESS,\n\t// MESSAGE_SEND_SUCCESS,\n\t// MESSAGE_SEND_FAIL,\n\t// MESSAGES_FETCH_FAIL,\n\tMESSAGES_LOAD_MORE_SUCCESS,\n\tMESSAGE_NEW\n} from \"../actions/actionTypes\";\n\nconst initialState = {\n\ttotal:0,\n\tpage:1,\n\titems:[]\n};\n\nconst messages = (state=initialState, action) => {\n\tconst {type, payload} = action;\n\tswitch (type) {\n\t\tcase MESSAGES_FETCH_SUCCESS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...payload,\n\t\t\t\titems:payload.items.reverse()\n\t\t\t}\n\t\tcase MESSAGE_NEW :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titems:[\n\t\t\t\t\t...state.items,\n\t\t\t\t\tpayload\n\t\t\t\t]\n\t\t\t}\n\t\tcase MESSAGES_LOAD_MORE_SUCCESS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttotal:payload.total,\n\t\t\t\tpage:payload.page,\n\t\t\t\titems:[\n\t\t\t\t\t...payload.items.reverse(),\n\t\t\t\t\t...state.items,\n\t\t\t\t]\n\n\t\t\t}\n\t}\n\treturn state\n}\n\nexport default messages","import {combineReducers} from \"redux\";\nimport user from \"./user\";\nimport messages from \"./message\";\n\nexport default combineReducers({\n\tuser,\n\tmessages\n})","import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport Chat from \"./components/Chat\";\n\nimport {Provider} from 'react-redux';\nimport {createStore, applyMiddleware} from \"redux\";\nimport {composeWithDevTools} from \"redux-devtools-extension\";\nimport thunk from 'redux-thunk';\n\nimport reducers from './store/reducers'\nimport setAuthToken from \"./utils/setAuthToken\";\nimport {loadUser} from \"./store/actions/user\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nconst store = createStore(reducers, composeWithDevTools(applyMiddleware(thunk)));\n\naxios.defaults.baseURL = 'https://radiant-taiga-91549.herokuapp.com';\n\nif(localStorage.token){\n\tsetAuthToken(localStorage.token)\n}\n\nconst App = () => {\n\n\tconst [isUserLoading, setIsUserLoading] = useState(true);\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait store.dispatch(loadUser());\n\t\t\tsetIsUserLoading(false);\n\t\t})();\n\t},[]);\n\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<div className=\"App\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Chat isUserLoading={isUserLoading}/>\n\t\t\t</div>\n\t\t</Provider>\n\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}