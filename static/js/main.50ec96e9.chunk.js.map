{"version":3,"sources":["components/UserAvatar/index.js","components/UserAvatar/UserAvatar.js","components/MessageItem/index.js","components/MessageItem/MessageItem.js","components/SkeletonMessage/index.js","components/SkeletonMessage/SkeletonMessage.js","utils/setAuthToken.js","store/actions/user.js","store/actions/actionTypes.js","components/MessageList/index.js","components/MessageList/MessageList.js","store/actions/message.js","components/LogoutButton/index.js","components/LogoutButton/LogoutButton.js","components/LoginButton/index.js","components/LoginButton/LoginButton.js","hooks/useForm.js","components/LoginForm/LoginForm.js","components/RegisterForm/RegisterForm.js","components/RegisterForm/index.js","components/LoginRegisterPopup/index.js","components/LoginRegisterPopup/LoginRegisterPopup.js","components/Chat/Chat.js","components/Chat/index.js","store/reducers/user.js","store/reducers/message.js","store/reducers/index.js","App.js","index.js"],"names":["UserAvatar","letters","isOnline","overlap","anchorOrigin","vertical","horizontal","badgeContent","style","backgroundColor","width","height","borderRadius","Avatar","toUpperCase","MessageItem","msg","onlineUsers","user","message","date","email","msgDate","Date","idx","findIndex","item","userId","_id","dateStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","ListItem","alignItems","ListItemAvatar","ListItemText","primary","display","justifyContent","Typography","component","variant","color","secondary","Fragment","Divider","SkeletonMessage","padding","Skeleton","paddingLeft","paddingBottom","setAuthToken","token","axios","defaults","headers","common","loadUser","dispatch","a","async","localStorage","get","res","type","payload","data","MessageList","connect","messages","getMessages","page","response","updateOnlineUsers","users","props","items","total","useState","isLoading","setIsLoading","isLoadingMore","setIsLoadingMore","isAuthenticated","useEffect","socket","io","baseURL","on","emit","online","List","length","CircularProgress","Button","margin","onClick","map","key","LogoutButton","userLogOut","LoginButton","setOpenLoginPopup","useForm","callback","validate","values","setValues","errors","setErrors","isSubmitting","setIsSubmitting","Object","keys","handleChange","name","value","handleSubmit","event","preventDefault","setServerErrors","serverErrors","useStyles","makeStyles","theme","paper","flexDirection","avatar","spacing","palette","main","form","marginTop","submit","classes","password","post","setItem","console","log","test","DialogContent","className","noValidate","onSubmit","FormControl","fullWidth","error","TextField","required","id","onChange","e","target","label","autoComplete","autoFocus","FormHelperText","DialogActions","size","RegisterForm","repeat_password","LoginRegisterPopup","open","setOpen","React","setValue","Dialog","onClose","aria-labelledby","position","Tabs","newValue","aria-label","centered","Tab","aria-controls","root","maxWidth","background","boxShadow","appBar","top","bottom","left","marginLeft","topToolbar","flexGrow","topToolbarText","fontWeight","Chat","state","openLoginPopup","isUserLoading","myRef","useRef","current","scrollIntoView","behavior","block","AppBar","Toolbar","Paper","square","ref","marginRight","placeholder","multiline","rowsMax","initialState","action","removeItem","reverse","combineReducers","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","App","setIsUserLoading","CssBaseline","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.50ec96e9.chunk.js","sourcesContent":["import UserAvatar from \"./UserAvatar\";\n\nexport default UserAvatar;","import React from 'react';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Badge from \"@material-ui/core/Badge/Badge\";\n\nconst UserAvatar = ({letters, isOnline}) => {\n\treturn (\n\t\t<Badge\n\t\t\toverlap=\"circle\"\n\t\t\tanchorOrigin={{\n\t\t\t\tvertical: 'bottom',\n\t\t\t\thorizontal: 'right',\n\t\t\t}}\n\t\t\tbadgeContent={isOnline ? <span style={{backgroundColor:\"#44b700\", width:10, height:10, borderRadius:\"50%\"}}/> : null}\n\t\t>\n\t\t\t<Avatar>{letters ? letters.toUpperCase() : null}</Avatar>\n\t\t</Badge>\n\t);\n};\n\nexport default UserAvatar;\n","import MessageItem from \"./MessageItem\";\n\nexport default MessageItem;\n","import React from 'react';\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport UserAvatar from \"../UserAvatar\";\n\nconst MessageItem = ({msg, onlineUsers}) => {\n\tconst {user, message, date} = msg;\n\tconst {email} = user;\n\tconst msgDate = new Date(date);\n\n\tconst idx = onlineUsers.findIndex((item) => item.userId === user._id);\n\n\tconst dateStr = `${msgDate.getFullYear()}-${msgDate.getMonth() < 10 ? `0${msgDate.getMonth()}` : msgDate.getMonth()}-${msgDate.getDate() < 10 ? `0${msgDate.getDate()}` : msgDate.getDate()}, \n\t${msgDate.getHours() < 10 ? `0${msgDate.getHours()}` : msgDate.getHours()}:${msgDate.getMinutes() < 10 ? `0${msgDate.getMinutes()}` : msgDate.getMinutes()}:${msgDate.getSeconds() < 10 ? `0${msgDate.getSeconds()}` : msgDate.getSeconds()}`;\n\treturn (\n\t\t<>\n\t\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<UserAvatar letters={`${email[0]}${email[1]}`} isOnline={idx !== -1}/>\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={\n\t\t\t\t\t\t<div style={{display:\"flex\", justifyContent:\"space-between\"}}>\n\t\t\t\t\t\t\t<Typography component=\"span\" variant=\"body2\" color=\"textPrimary\">\n\t\t\t\t\t\t\t\t{email}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography component=\"span\" variant=\"body2\" color=\"textPrimary\">\n\t\t\t\t\t\t\t\t{dateStr}\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\tsecondary={\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\n\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" component=\"li\" />\n\t\t</>\n\t);\n};\n\nexport default MessageItem;\n","import SkeletonMessage from \"./SkeletonMessage\";\n\nexport default SkeletonMessage;","import React from 'react';\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst SkeletonMessage = () => {\n\treturn (\n\t\t<div style={{display:\"flex\", padding:\"10px\"}}>\n\t\t\t<div>\n\t\t\t\t<Skeleton variant=\"circle\" width={40} height={40} />\n\t\t\t</div>\n\t\t\t<div style={{width:\"100%\", paddingLeft:\"10px\"}}>\n\t\t\t\t<div style={{paddingBottom:\"10px\"}}><Skeleton variant=\"rect\" width={150} height={20} /></div>\n\t\t\t\t<Skeleton variant=\"rect\" width={\"100%\"} height={50} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default SkeletonMessage;\n","import axios from 'axios'\n\nconst setAuthToken = token => {\n\tif(token){\n\t\taxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\t}else{\n\n\t\tdelete axios.defaults.headers.common['Authorization']\n\t}\n}\n\nexport default setAuthToken","import {USER_LOGIN_SUCCESS, USER_LOGIN_FAIL, USER_LOGOUT, ONLINE_USERS} from \"./actionTypes\";\nimport setAuthToken from \"../../utils/setAuthToken\";\nimport axios from 'axios'\nimport io from \"socket.io-client\";\n\nconst loadUser = () => async dispatch => {\n\tif (localStorage.token) {\n\t\tsetAuthToken(localStorage.token)\n\t}\n\ttry {\n\t\tconst res = await axios.get('/users/me');\n\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_SUCCESS,\n\t\t\tpayload: res.data\n\t\t})\n\t} catch (e) {\n\t\tdispatch({\n\t\t\ttype: USER_LOGIN_FAIL\n\t\t})\n\n\t}\n}\n\nconst updateOnlineUsers = (users) => async dispatch => {\n\tdispatch({\n\t\ttype: ONLINE_USERS,\n\t\tpayload: users\n\t})\n}\n\nconst userLogOut = (userId) => dispatch => {\n\tconst socket = io(axios.defaults.baseURL);\n\tsocket.emit('user logout', userId);\n\tdispatch({\n\t\ttype: USER_LOGOUT,\n\t})\n}\n\nexport {\n\tloadUser,\n\tuserLogOut,\n\tupdateOnlineUsers\n}","export const USER_LOGIN_SUCCESS = \"USER_LOGIN_SUCCESS\";\nexport const USER_LOGIN_FAIL = \"USER_LOGIN_FAIL\";\nexport const USER_LOGOUT = \"USER_LOGOUT\";\n\nexport const MESSAGES_FETCH_SUCCESS = \"MESSAGES_FETCH_SUCCESS\";\nexport const MESSAGES_LOAD_MORE_SUCCESS = \"MESSAGES_LOAD_MORE_SUCCESS\";\nexport const MESSAGES_FETCH_FAIL = \"MESSAGES_FETCH_FAIL\";\n// export const MESSAGE_SEND_SUCCESS = \"MESSAGE_SEND_SUCCESS\";\n// export const MESSAGE_SEND_FAIL = \"MESSAGE_SEND_FAIL\";\n\nexport const ONLINE_USERS = \"ONLINE_USERS\";","import MessageList from \"./MessageList\";\n\nexport default MessageList;","import React, {useEffect, useState} from 'react';\nimport List from '@material-ui/core/List';\nimport MessageItem from \"../MessageItem\";\nimport {connect} from \"react-redux\";\nimport {getMessages} from '../../store/actions/message'\nimport SkeletonMessage from \"../SkeletonMessage\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\nimport {updateOnlineUsers} from \"../../store/actions/user\";\n\nconst MessageList = (props) => {\n\n\tconst {getMessages, messages, user, updateOnlineUsers} = props;\n\tconst {items, total, page} = messages;\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [isLoadingMore, setIsLoadingMore] = useState(false);\n\n\tconst {isAuthenticated, _id, onlineUsers} = user;\n\tuseEffect(() => {\n\t\tsetIsLoading(true);\n\t\t(async () => {\n\t\t\tawait getMessages();\n\t\t\tsetIsLoading(false);\n\t\t})()\n\t},[]);\n\n\tuseEffect(() => {\n\n\t\tconst socket = io(axios.defaults.baseURL);\n\t\tsocket.on('connect', function(){\n\t\t\tsocket.emit('online user', isAuthenticated ? _id : null);\n\t\t});\n\n\t\tsocket.on('online users', (data) => {\n\t\t\tupdateOnlineUsers(data.online);\n\t\t});\n\n\t}, [user.isAuthenticated]);\n\n\tconst loadMore = async () => {\n\t\tsetIsLoadingMore(true);\n\t\tawait getMessages(page+1);\n\t\tsetIsLoadingMore(false)\n\t}\n\n\treturn (\n\t\t<List>\n\t\t\t{isLoading ? (\n\t\t\t\t<>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t\t<SkeletonMessage/>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{(items.length < total) ? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t{isLoadingMore ? <div style={{display: \"flex\",width: \"100%\",justifyContent: \"center\"}}><CircularProgress color=\"secondary\" /></div> : (\n\t\t\t\t\t\t\t\t<Button variant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tstyle={{margin:\"0 auto\"}}\n\t\t\t\t\t\t\t\t\t\tonClick={() => loadMore()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tGet older\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{items.length > 0 && items.map((msg) => {\n\t\t\t\t\t\treturn <MessageItem key={msg._id} msg={msg} onlineUsers={onlineUsers}/>\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t</List>\n\t);\n};\n\nconst mapStateToProps = ({messages}) => {\n\treturn {\n\t\tmessages,\n\t}\n}\n\nexport default connect(\n\tmapStateToProps,\n\t{getMessages, updateOnlineUsers}\n)(MessageList);\n","import axios from 'axios';\nimport {\n\tMESSAGES_FETCH_FAIL,\n\t// MESSAGE_SEND_FAIL,\n\t// MESSAGE_SEND_SUCCESS,\n\tMESSAGES_FETCH_SUCCESS,\n\tMESSAGES_LOAD_MORE_SUCCESS\n} from \"./actionTypes\";\n\nconst getMessages = (page) => async dispatch => {\n\ttry {\n\t\tif(page){\n\t\t\t// load more\n\t\t\tconst response = await axios.get(`/messages?page=${page}`);\n\t\t\tdispatch({\n\t\t\t\ttype: MESSAGES_LOAD_MORE_SUCCESS,\n\t\t\t\tpayload: response.data\n\t\t\t})\n\t\t}else{\n\t\t\tconst response = await axios.get(`/messages`);\n\t\t\tdispatch({\n\t\t\t\ttype: MESSAGES_FETCH_SUCCESS,\n\t\t\t\tpayload: response.data\n\t\t\t})\n\n\t\t}\n\n\t}catch (e) {\n\t\tdispatch({\n\t\t\ttype: MESSAGES_FETCH_FAIL,\n\t\t})\n\t}\n}\n\n\nexport {\n\tgetMessages,\n}\n\n","import LogoutButton from \"./LogoutButton\";\n\nexport default LogoutButton;","import React from 'react';\nimport Button from \"@material-ui/core/Button\";\nimport {connect} from \"react-redux\";\nimport {userLogOut} from \"../../store/actions/user\";\n\nconst LogoutButton = ({isAuthenticated, userLogOut, _id}) => {\n\treturn (\n\t\t<>\n\t\t\t{isAuthenticated && (\n\t\t\t\t<Button variant=\"outlined\" color=\"secondary\" onClick={() => userLogOut(_id)}>\n\t\t\t\t\tLog out\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</>\n\n\t);\n};\n\nconst mapStateToProps = ({user}) => {\n\tconst {isAuthenticated, _id} = user;\n\treturn {\n\t\tisAuthenticated,\n\t\t_id\n\t}\n}\nexport default connect(\n\tmapStateToProps, {userLogOut}\n)(LogoutButton);\n","import LoginButton from \"./LoginButton\";\n\nexport default LoginButton","import React from 'react';\nimport Button from \"@material-ui/core/Button\";\nimport {connect} from \"react-redux\";\n\nconst LoginButton = ({setOpenLoginPopup, isAuthenticated}) => {\n\treturn (\n\t\t<>\n\t\t\t{!isAuthenticated && (\n\t\t\t\t<Button variant=\"outlined\" color=\"primary\" onClick={() => setOpenLoginPopup(true)}>\n\t\t\t\t\tlogin\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</>\n\n\t);\n};\n\nconst mapStateToProps = ({user}) => {\n\tconst {isAuthenticated} = user;\n\treturn {\n\t\tisAuthenticated\n\t}\n}\nexport default connect(\n\tmapStateToProps\n)(LoginButton);\n","import { useState, useEffect } from \"react\";\nconst useForm = (callback, validate) => {\n\tconst [values, setValues] = useState({});\n\tconst [errors, setErrors] = useState({});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst handleChange = (name, value) => {\n\t\tsetValues(values => (\n\t\t\t{\n\t\t\t\t...values,\n\t\t\t\t[name]: value\n\t\t\t}\n\t\t));\n\t\tsetErrors(errors => (\n\t\t\t{\n\t\t\t\t...errors,\n\t\t\t\t[name]: null\n\t\t\t}\n\t\t));\n\t};\n\tconst handleSubmit = event => {\n\t\tevent.preventDefault();\n\t\tsetErrors(validate(values));\n\t\tsetIsSubmitting(true);\n\t};\n\tconst setServerErrors = (serverErrors) => {\n\t\tsetErrors(errors => (\n\t\t\t{\n\t\t\t\t...errors,\n\t\t\t\t...serverErrors\n\t\t\t}\n\t\t));\n\t};\n\tuseEffect(() => {\n\t\tif (Object.keys(errors).length === 0 && isSubmitting) {\n\t\t\tcallback();\n\t\t}\n\t}, [errors]);\n\treturn {\n\t\thandleChange,\n\t\thandleSubmit,\n\t\tsetServerErrors,\n\t\tvalues,\n\t\terrors\n\t};\n};\nexport default useForm;","import React, {useState} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useForm from \"../../hooks/useForm\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport {connect} from \"react-redux\";\nimport {loadUser} from \"../../store/actions/user\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\nconst useStyles = makeStyles(theme => ({\n\tpaper: {\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%',\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nconst LoginForm = (props) => {\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst classes = useStyles();\n\n\tconst validate = (values) => {\n\t\tconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tconst errors = {};\n\n\t\tif (!values.email) {\n\t\t\terrors.email = 'Required';\n\t\t}\n\t\tif (!values.password) {\n\t\t\terrors.password = 'Required';\n\t\t}\n\t\tif (values.email && !emailRegex.test(values.email)) {\n\t\t\terrors.email = 'Email is not valid';\n\t\t}\n\n\t\treturn errors;\n\t};\n\n\n\tconst submit = async () => {\n\t\tsetIsSubmitting(true);\n\t\tconst {email, password} = values;\n\t\ttry {\n\t\t\tconst response = await axios.post('/auth', {email, password})\n\t\t\tconst {data} = response;\n\t\t\tconst {token} = data;\n\t\t\tlocalStorage.setItem('token', token);\n\t\t\tprops.loadUser();\n\n\t\t\tsetIsSubmitting(false);\n\t\t}catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tsetServerErrors({email:e.message});\n\t\t\tsetIsSubmitting(false);\n\t\t}\n\t}\n\n\tconst { handleChange, handleSubmit, values, errors, setServerErrors } = useForm(\n\t\tsubmit,\n\t\tvalidate,\n\t);\n\n\n\treturn (\n\t\t<>\n\t\t\t<DialogContent>\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<Avatar className={classes.avatar}/>\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\t\tSign in\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"email\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tlabel=\"Email Address\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\terror={!!errors[\"email\"]}\n\t\t\t\t\t\t\t\tvalue={values[\"email\"] ? values[\"email\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"email\"] && <FormHelperText>{errors[\"email\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"password\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\terror={!!errors[\"password\"]}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\tvalue={values[\"password\"] ? values[\"password\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"password\"] && <FormHelperText>{errors[\"password\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t{!isSubmitting ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t>\n\t\t\t\t\t\tSign In\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t)}\n\t\t\t</DialogActions>\n\n\t\t</>\n\t);\n}\n\nexport default connect(\n\tnull,\n\t{loadUser}\n)(LoginForm)","import React, {useState} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useForm from \"../../hooks/useForm\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport connect from \"react-redux/es/connect/connect\";\nimport {loadUser} from \"../../store/actions/user\";\n\n\n\nconst useStyles = makeStyles(theme => ({\n\tpaper: {\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nconst RegisterForm = (props) => {\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst classes = useStyles();\n\n\tconst validate = (values) => {\n\t\tconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tconst errors = {};\n\n\t\tif (!values.email) {\n\t\t\terrors.email = 'Required';\n\t\t}\n\t\tif (values.email && !emailRegex.test(values.email)) {\n\t\t\terrors.email = 'Email is not valid';\n\t\t}\n\t\tif (!values.password) {\n\t\t\terrors.password = 'Required';\n\t\t}\n\t\tif (!values.repeat_password) {\n\t\t\terrors.repeat_password = 'Required';\n\t\t}\n\t\tif((values.password && values.repeat_password) && (values.password !== values.repeat_password)){\n\t\t\terrors.password = 'Passwords are different';\n\t\t\terrors.repeat_password = 'Passwords are different';\n\t\t}\n\n\n\t\treturn errors;\n\t};\n\n\n\tconst submit = async () => {\n\t\tsetIsSubmitting(true);\n\t\tconst {email, password} = values;\n\t\ttry {\n\t\t\tconst response = await axios.post('/users', {email, password})\n\t\t\tconst {data} = response;\n\t\t\tconst {token} = data;\n\t\t\tsetIsSubmitting(false);\n\t\t\tlocalStorage.setItem('token', token);\n\t\t\tprops.loadUser();\n\n\t\t}catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tsetServerErrors({email:e.message});\n\t\t\tsetIsSubmitting(false);\n\t\t}\n\t}\n\n\tconst { handleChange, handleSubmit, values, errors, setServerErrors } = useForm(\n\t\tsubmit,\n\t\tvalidate,\n\t);\n\n\n\n\treturn (\n\t\t<>\n\t\t\t<DialogContent>\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<Avatar className={classes.avatar}/>\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"email\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tlabel=\"Email Address\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\terror={!!errors[\"email\"]}\n\t\t\t\t\t\t\t\tvalue={values[\"email\"] ? values[\"email\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"email\"] && <FormHelperText>{errors[\"email\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"password\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\terror={!!errors[\"password\"]}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\tvalue={values[\"password\"] ? values[\"password\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"password\"] && <FormHelperText>{errors[\"password\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl fullWidth error={!!errors[\"repeat_password\"]}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tname=\"repeat_password\"\n\t\t\t\t\t\t\t\tlabel=\"Repeat password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"repeat_password\"\n\t\t\t\t\t\t\t\terror={!!errors[\"repeat_password\"]}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\tvalue={values[\"repeat_password\"] ? values[\"repeat_password\"] : \"\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors[\"repeat_password\"] && <FormHelperText>{errors[\"repeat_password\"]}</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t{!isSubmitting ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t)}\n\t\t\t</DialogActions>\n\t\t</>\n\t);\n}\n\nexport default connect(\n\tnull,\n\t{loadUser}\n)(RegisterForm)","import RegisterForm from \"./RegisterForm\";\n\nexport default RegisterForm","import LoginRegisterPopup from \"./LoginRegisterPopup\";\n\nexport default LoginRegisterPopup","import React, {useEffect} from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport AppBar from \"@material-ui/core/AppBar/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport LoginForm from \"../LoginForm/LoginForm\";\nimport RegisterForm from \"../RegisterForm\";\nimport {connect} from \"react-redux\";\n\nconst LoginRegisterPopup = (props) => {\n\tconst {open, setOpen, isAuthenticated} = props;\n\n\tconst [value, setValue] = React.useState(0);\n\n\tuseEffect(() => {\n\t\tif(isAuthenticated){\n\t\t\tsetOpen(false)\n\t\t}\n\t},[isAuthenticated]);\n\n\n\treturn (\n\t\t\t<Dialog open={open} onClose={() => setOpen(false)} aria-labelledby=\"auth-tabs-title\">\n\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t<Tabs value={value} onChange={(event, newValue) => setValue(newValue)} aria-label=\"auth tabs\" centered>\n\t\t\t\t\t\t<Tab label=\"Sign In\" id=\"signIn\" aria-controls=\"signIn-tab\"/>\n\t\t\t\t\t\t<Tab label=\"Sign Up\" id=\"signUp\" aria-controls=\"signUp-tab\"/>\n\t\t\t\t\t</Tabs>\n\t\t\t\t</AppBar>\n\t\t\t\t{value === 0 && <LoginForm/>}\n\t\t\t\t{value === 1 && <RegisterForm/>}\n\t\t\t</Dialog>\n\t);\n}\n\nconst mapStateToProps = ({user}) => {\n\tconst {isAuthenticated} = user;\n\treturn {\n\t\tisAuthenticated\n\t}\n}\n\nexport default connect(\n\tmapStateToProps\n)(LoginRegisterPopup)","import React, {useEffect, useRef, useState} from 'react';\nimport MessageList from \"../MessageList\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport {makeStyles} from \"@material-ui/core\";\nimport LogoutButton from \"../LogoutButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport LoginButton from \"../LoginButton\";\nimport LoginRegisterPopup from \"../LoginRegisterPopup\";\nimport {connect} from \"react-redux\";\nimport UserAvatar from \"../UserAvatar\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport useForm from \"../../hooks/useForm\";\nimport axios from \"axios\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\twidth: '100%',\n\t\tmaxWidth: 360,\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tmargin:\"0 auto\",\n\t\theight:\"100%\"\n\t},\n\tpaper: {\n\t\tpaddingBottom: 50,\n\t\tboxShadow:\"none\"\n\t},\n\tappBar: {\n\t\ttop: 'auto',\n\t\tbottom: 0,\n\t\twidth: '100%',\n\t\tmaxWidth: 360,\n\t\tleft:\"50%\",\n\t\tmarginLeft:\"-180px\"\n\t},\n\ttopToolbar:{\n\t\tflexGrow: 1,\n\t\tdisplay:\"flex\",\n\t\talignItems: \"center\"\n\t},\n\ttopToolbarText:{\n\t\tfontWeight:700,\n\t\tmarginLeft: \"10px\"\n\t}\n}));\n\n\nconst Chat = (props) => {\n\tconst classes = useStyles();\n\tconst [openLoginPopup, setOpenLoginPopup] = useState(false);\n\tconst {user, isUserLoading} = props;\n\tconst {email, isAuthenticated} = user;\n\n\tconst myRef = useRef(null);\n\n\tconst executeScroll = () => {\n\t\tmyRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\n\t};\n\n\tuseEffect(() => {\n\t\texecuteScroll();\n\t},[]);\n\n\tconst validate = (values) => {\n\t\tconst errors = {};\n\t\tif (!values.message) {\n\t\t\terrors.message = 'Required';\n\t\t}\n\t\treturn errors;\n\t};\n\n\tconst submit = async () => {\n\t\tconst {message} = values;\n\t\ttry {\n\t\t\tconst response = await axios.post(`/messages`, {message});\n\t\t\tconsole.log(response)\n\t\t}catch (e) {\n\t\t\tif(e.response && e.response.data){\n\t\t\t\tsetServerErrors({\n\t\t\t\t\tmessage:e.response.data\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tsetServerErrors({\n\t\t\t\t\tmessage:e.message\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\t}\n\n\n\tconst { handleChange, handleSubmit, values, errors, setServerErrors } = useForm(\n\t\tsubmit,\n\t\tvalidate,\n\t);\n\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar position=\"sticky\" style={{flexGrow: 1}} color=\"inherit\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={classes.topToolbar}>\n\t\t\t\t\t\t\t{isUserLoading ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"circle\" width={40} height={40} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"rect\" width={150} height={20} />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tisAuthenticated ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar letters={`${email[0]}${email[1]}`} isOnline={true}/>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.topToolbarText}>{email}</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : <>\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar isOnline={false}/>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.topToolbarText}>Please, Login</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!isUserLoading && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LogoutButton/>\n\t\t\t\t\t\t\t\t<LoginButton setOpenLoginPopup={setOpenLoginPopup}/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Paper square className={classes.paper}>\n\t\t\t\t<MessageList user={user}/>\n\t\t\t\t<div ref={myRef}/>\n\t\t\t</Paper>\n\t\t\t<AppBar position=\"fixed\" color=\"inherit\" className={classes.appBar}>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<FormControl fullWidth error={!!errors[\"message\"]} style={{marginRight:\"5px\"}}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"message\"\n\t\t\t\t\t\t\tplaceholder=\"Your message\"\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\trowsMax=\"2\"\n\t\t\t\t\t\t\terror={!!errors[\"message\"]}\n\t\t\t\t\t\t\tvalue={values['message'] ? values['message'] : \"\" }\n\t\t\t\t\t\t\tonChange={(event) => handleChange(\"message\", event.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors[\"message\"] && <FormHelperText>{errors[\"message\"]}</FormHelperText>}\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n\t\t\t\t\t\tSend\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<LoginRegisterPopup open={openLoginPopup} setOpen={setOpenLoginPopup}/>\n\t\t</div>\n\t);\n};\n\nconst mapStateTotProps = (state) => {\n\tconst {user} = state;\n\treturn {\n\t\tuser\n\t}\n}\nexport default connect(\n\tmapStateTotProps,\n)(Chat);\n","import Chat from \"./Chat\";\n\nexport default Chat;","import {USER_LOGIN_SUCCESS, USER_LOGIN_FAIL, USER_LOGOUT, ONLINE_USERS} from \"../actions/actionTypes\";\n\nconst initialState = {\n\tisAuthenticated:false,\n\tonlineUsers:[]\n};\n\nconst user = (state=initialState, action) => {\n\tconst {type, payload} = action;\n\n\tswitch (type) {\n\t\tcase USER_LOGIN_SUCCESS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisAuthenticated:true,\n\t\t\t\t...payload\n\t\t\t}\n\t\tcase ONLINE_USERS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tonlineUsers:payload\n\t\t\t}\n\t\tcase USER_LOGOUT :\n\t\tcase USER_LOGIN_FAIL :\n\t\t\tlocalStorage.removeItem('token');\n\t\t\treturn {\n\t\t\t\t...initialState,\n\t\t\t\tisAuthenticated:false\n\t\t\t}\n\t}\n\treturn state\n}\n\nexport default user","import {\n\tMESSAGES_FETCH_SUCCESS,\n\t// MESSAGE_SEND_SUCCESS,\n\t// MESSAGE_SEND_FAIL,\n\t// MESSAGES_FETCH_FAIL,\n\tMESSAGES_LOAD_MORE_SUCCESS\n} from \"../actions/actionTypes\";\n\nconst initialState = {\n\ttotal:0,\n\tpage:1,\n\titems:[]\n};\n\nconst messages = (state=initialState, action) => {\n\tconst {type, payload} = action;\n\tswitch (type) {\n\t\tcase MESSAGES_FETCH_SUCCESS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...payload,\n\t\t\t\titems:payload.items.reverse()\n\t\t\t}\n\t\tcase MESSAGES_LOAD_MORE_SUCCESS :\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttotal:payload.total,\n\t\t\t\tpage:payload.page,\n\t\t\t\titems:[\n\t\t\t\t\t...payload.items.reverse(),\n\t\t\t\t\t...state.items,\n\t\t\t\t]\n\n\t\t\t}\n\t}\n\treturn state\n}\n\nexport default messages","import {combineReducers} from \"redux\";\nimport user from \"./user\";\nimport messages from \"./message\";\n\nexport default combineReducers({\n\tuser,\n\tmessages\n})","import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport Chat from \"./components/Chat\";\n\nimport {Provider} from 'react-redux';\nimport {createStore, applyMiddleware} from \"redux\";\nimport {composeWithDevTools} from \"redux-devtools-extension\";\nimport thunk from 'redux-thunk';\n\nimport reducers from './store/reducers'\nimport setAuthToken from \"./utils/setAuthToken\";\nimport {loadUser} from \"./store/actions/user\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nconst store = createStore(reducers, composeWithDevTools(applyMiddleware(thunk)));\n\naxios.defaults.baseURL = 'https://radiant-taiga-91549.herokuapp.com';\n\nif(localStorage.token){\n\tsetAuthToken(localStorage.token)\n}\n\nconst App = () => {\n\n\tconst [isUserLoading, setIsUserLoading] = useState(true);\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait store.dispatch(loadUser());\n\t\t\tsetIsUserLoading(false);\n\t\t})();\n\t},[]);\n\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<div className=\"App\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Chat isUserLoading={isUserLoading}/>\n\t\t\t</div>\n\t\t</Provider>\n\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}